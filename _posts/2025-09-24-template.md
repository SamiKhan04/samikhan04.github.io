---
layout: post
title: Template
date: 2025-09-24 15:07 -0700
categories:
- Competative Programming
---
```c++
#include <iostream>
#include <vector>
#include <utility>
using namespace std;
using ci = const int&;
using ll = long long;
using pii = pair<int, int>;
using pll = pair<ll, ll>;
using pli = pair<ll, int>;
#define rep(i, n) for (int i{}; i < (n); ++i)
#define per(i, n) for (int i{(n)-1}; i >= 0; --i)

template <typename T> bool chmax(T& a, const T& b) { return a < b ? a = b, 1 : 0; }
template <typename T> bool chmin(T& a, const T& b) { return a > b ? a = b, 1 : 0; }

struct DSU {
    vector<int> parents;
    DSU(const int& n) : parents(n, -1) {} 
    int find(const int& u) { return parents[u] < 0 ? u : parents[u] = find(parents[u]); } 
    bool connected(const int& u, const int& v) { return find(u) == find(v); }
    bool unite(int u, int v) {
        u = find(u), v = find(v);
        if (v == u) return false; 
        if (parents[u] > parents[v]) swap(u, v);
        parents[u] += parents[v]; 
        parents[v] = u; 
        return true;
    }
};

struct SCC {
    const vector<vector<int>>& adj;
    vector<vector<int>> adj_t, id2comp;
    vector<int> order, id, seen;
    int components;
    SCC(const vector<vector<int>>& g, ci n) : adj(g), adj_t(n), id(n), seen(n), components(0), id2comp() {
        rep(i, n) {
            rep(j, int(size(adj[i]))) {
                adj_t[adj[i][j]].push_back(i);
            }
        }
        rep(i, n) if (!seen[i]) dfs1(i);
        rep(i, n) seen[i] = false;
        per(i, n) if (!seen[order[i]]) {
            ++components;
            id2comp.emplace_back();
            dfs2(order[i]);
        }
    }
    void dfs1(ci v) {
       seen[v] = true;
       for (ci u : adj[v]) if (!seen[u]) dfs1(u);
       order.push_back(v);
    }
    void dfs2(ci v) {
        seen[v] = true;
        for (ci u : adj_t[v]) if (!seen[u]) dfs2(u);
        id[v] = components;
        id2comp[components-1].push_back(v);
    }
};


int main() {
    ios::sync_with_stdio(false); cin.tie(nullptr);
    
    return 0;
}
```